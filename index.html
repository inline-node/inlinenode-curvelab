<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>InlineNode Tools</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">

  <!-- Plotly & Math.js -->
  <script src="https://cdn.plot.ly/plotly-2.24.2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjs@11.8.0/lib/browser/math.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="src/css/style.css">
</head>
<body>
  <div id="app" class="app" data-theme="light">
    <aside class="sidebar" aria-label="Main navigation">
      <div class="brand">
        <img src="assets/logo.svg" alt="" class="logo" onerror="this.style.display='none'">
        <div class="brand-text">
          <div class="brand-title">InlineNode Tools</div>
        </div>
      </div>

      <nav class="nav" role="navigation" aria-label="Primary">
        <button class="nav-item active" data-view="curvelab" aria-expanded="true">CurveLab</button>

        <div class="nav-group">
          <button class="nav-item group-toggle" data-group="electools">ElecTools ▾</button>
          <div class="nav-sub" id="electools-sub">
            <button class="nav-sub-item" data-view="elec-ohm">Ohm's Law</button>
            <button class="nav-sub-item" data-view="elec-vd">Voltage Divider</button>
            <button class="nav-sub-item" data-view="elec-rc">RC Time Constant</button>
            <button class="nav-sub-item" data-view="elec-rp">Series / Parallel</button>
          </div>
        </div>

        <button class="nav-item" data-view="about">About</button>
      </nav>

      <div class="sidebar-bottom">
        <div class="theme-toggle">
          <label class="switch">
            <input id="theme-switch" type="checkbox" />
            <span class="slider"></span>
          </label>
          <div class="theme-label">Dark mode</div>
        </div>
        <div class="version">v0.4</div>
      </div>
    </aside>

    <main class="main" role="main">
      <!-- CurveLab View -->
      <section id="curvelab" class="view">
        <div class="view-header">
          <h2>CurveLab</h2>
          <div class="view-actions" aria-hidden="true"></div>
        </div>

        <div class="card-grid">
          <div class="card card-left">
            <h3>Data table (editable)</h3>
            <div class="table-wrap" id="table-wrap">
              <table id="data-table" class="data-table" aria-label="Data input table">
                <thead>
                  <tr><th>X</th><th>Y</th></tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>

            <div class="table-controls">
              <label class="btn ghost small">
                <input id="file-csv" type="file" accept=".csv" style="display:none" />
                Import CSV
              </label>
              <button id="export-csv" class="btn ghost small">Export CSV</button>
              <button id="clear-table" class="btn ghost small">Clear table</button>
            </div>

            <div class="hint small muted">Tip: Paste directly from Excel / Sheets into the table. Only first two columns will be used.</div>

            <div class="form-row small" style="margin-top:12px">
              <select id="fit-type" aria-label="Select fit type">
                <option value="linear">Linear</option>
                <option value="polynomial">Polynomial</option>
                <option value="exponential">Exponential</option>
                <option value="logarithmic">Logarithmic</option>
              </select>
              <label id="deg-label" style="display:none">Degree</label>
              <input id="poly-degree" type="number" min="1" max="8" value="2" style="width:72px;display:none" />
              <button id="btn-fit" class="btn">Fit</button>
            </div>
          </div>

          <div class="card card-right">
            <h3>Plot & Results</h3>
            <div id="plot" class="plot" role="img" aria-label="Data plot"></div>
            <div id="fit-info" class="fit-info" aria-live="polite"></div>
          </div>
        </div>
      </section>

      <!-- ElecTool - Ohm's Law -->
      <section id="elec-ohm" class="view" style="display:none">
        <div class="view-header">
          <h2>Ohm's Law</h2>
        </div>
        <div class="card">
          <div class="explain">
            <strong>Equations</strong>: V = I × R, P = V × I
            <div class="small muted">Provide any two known values (V, I, R or P) and press Calculate. Units: V (volts), A (amps), Ω (ohms), W (watts).</div>
          </div>

          <div class="card-body">
            <div class="grid-3">
              <label>Voltage (V)</label><input id="ohm-v" type="number" step="any" placeholder=""><div class="units">V</div>
              <label>Current (I)</label><input id="ohm-i" type="number" step="any" placeholder=""><div class="units">A</div>
              <label>Resistance (R)</label>
                <div class="input-with-unit">
                  <input id="ohm-r" type="number" step="any" placeholder="">
                  <select id="ohm-r-unit" class="unit-select"><option value="1">Ω</option><option value="1000">kΩ</option></select>
                </div><div class="units">Ω</div>
              <label>Power (P)</label><input id="ohm-p" type="number" step="any" placeholder=""><div class="units">W</div>
            </div>

            <div class="calc-actions">
              <button id="ohm-calc" class="btn">Calculate</button>
              <button id="ohm-clear" class="btn ghost">Clear</button>
            </div>
            <div id="ohm-result" class="calc-result monospace" aria-live="polite"></div>
          </div>
        </div>
      </section>

      <!-- ElecTool - Voltage Divider -->
      <section id="elec-vd" class="view" style="display:none">
        <div class="view-header"><h2>Voltage Divider</h2></div>
        <div class="card">
          <div class="explain">
            <strong>Equation</strong>: V<sub>out</sub> = V<sub>in</sub> × (R₂ / (R₁ + R₂))
            <div class="small muted">Provide any three of Vin, R1, R2, Vout to compute the fourth. R units selectable (Ω / kΩ).</div>
          </div>
          <div class="card-body">
            <div class="grid-3">
              <label>Source voltage (Vin)</label><input id="vd-vin" type="number" step="any"><div class="units">V</div>
              <label>R1 (top)</label>
                <div class="input-with-unit">
                  <input id="vd-r1" type="number" step="any">
                  <select id="vd-r1-unit" class="unit-select"><option value="1">Ω</option><option value="1000">kΩ</option></select>
                </div><div class="units">Ω</div>
              <label>R2 (bottom)</label>
                <div class="input-with-unit">
                  <input id="vd-r2" type="number" step="any">
                  <select id="vd-r2-unit" class="unit-select"><option value="1">Ω</option><option value="1000">kΩ</option></select>
                </div><div class="units">Ω</div>
              <label>Output voltage (Vout)</label><input id="vd-vout" type="number" step="any"><div class="units">V</div>
            </div>

            <div class="calc-actions">
              <button id="vd-calc" class="btn">Calculate</button>
              <button id="vd-clear" class="btn ghost">Clear</button>
            </div>
            <div id="vd-result" class="calc-result monospace" aria-live="polite"></div>
          </div>
        </div>
      </section>

      <!-- ElecTool - RC -->
      <section id="elec-rc" class="view" style="display:none">
        <div class="view-header"><h2>RC Time Constant</h2></div>
        <div class="card">
          <div class="explain"><strong>Equation</strong>: τ = R × C (seconds)</div>
          <div class="card-body">
            <div class="grid-3">
              <label>Resistance (R)</label>
                <div class="input-with-unit">
                  <input id="rc-r" type="number" step="any">
                  <select id="rc-r-unit" class="unit-select"><option value="1">Ω</option><option value="1000">kΩ</option></select>
                </div><div class="units">Ω</div>
              <label>Capacitance (C)</label><input id="rc-c" type="number" step="any" placeholder="e.g. 1e-6"><div class="units">F</div>
              <label>Time constant (τ)</label><input id="rc-tau" type="text" readonly><div class="units">s</div>
            </div>

            <div class="calc-actions">
              <button id="rc-calc" class="btn">Calculate τ</button>
              <button id="rc-clear" class="btn ghost">Clear</button>
            </div>
            <div id="rc-result" class="calc-result monospace" aria-live="polite"></div>
          </div>
        </div>
      </section>

      <!-- ElecTool - Series/Parallel -->
      <section id="elec-rp" class="view" style="display:none">
        <div class="view-header"><h2>Series & Parallel Resistances</h2></div>
        <div class="card">
          <div class="explain"><strong>Quick</strong>: compute combined resistance for two resistors.</div>
          <div class="card-body">
            <div class="grid-3">
              <label>R A</label><input id="rp-a" type="number" step="any"><div class="units">Ω</div>
              <label>R B</label><input id="rp-b" type="number" step="any"><div class="units">Ω</div>
              <label>Mode</label>
                <select id="rp-mode"><option value="series">Series</option><option value="parallel">Parallel</option></select><div class="units"></div>
            </div>

            <div class="calc-actions">
              <button id="rp-calc" class="btn">Compute</button>
              <button id="rp-clear" class="btn ghost">Clear</button>
            </div>
            <div id="rp-result" class="calc-result monospace" aria-live="polite"></div>
          </div>
        </div>
      </section>

      <!-- About -->
      <section id="about" class="view" style="display:none">
        <div class="view-header"><h2>About</h2></div>
        <div class="card">
          <p>InlineNode Tools — helpful, educational engineering calculators and regression tools. Data and preferences remain local to your browser. v0.4</p>
        </div>
      </section>

      <footer class="footer">© InlineNode</footer>
    </main>
  </div>

  <!-- Scripts -->
  <script src="src/js/utils.js"></script>
  <script src="src/js/regression.js"></script>
  <script src="src/js/plot.js"></script>
  <script src="src/js/calculators.js"></script>
  <script src="src/js/main.js"></script>
</body>
</html>
